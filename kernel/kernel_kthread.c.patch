--- original/kernel/kthread.c	2020-05-07 08:31:27.440772360 +0200
+++ changed/kernel/kthread.c	2019-06-03 13:39:53.000000000 +0200
@@ -450,6 +450,8 @@ int kthread_park(struct task_struct *k)
 			if (k != current) {
 				wake_up_process(k);
 				wait_for_completion(&kthread->parked);
+				while(k->state != TASK_PARKED)
+					cond_resched();
 			}
 		}
 		ret = 0;
