--- original/include/linux/mmc/host.h	2020-05-07 08:31:26.941776849 +0200
+++ changed/include/linux/mmc/host.h	2019-06-03 13:39:53.000000000 +0200
@@ -17,6 +17,7 @@
 #include <linux/device.h>
 #include <linux/devfreq.h>
 #include <linux/fault-inject.h>
+#include <linux/wakelock.h>
 
 #include <linux/mmc/core.h>
 #include <linux/mmc/card.h>
@@ -477,12 +478,15 @@ struct mmc_host {
 #define MMC_CAP2_ASYNC_SDIO_IRQ_4BIT_MODE (1 << 20)
 /* Some hosts need additional tuning */
 #define MMC_CAP2_HS400_POST_TUNING	(1 << 21)
+#define MMC_CAP2_DETECT_ON_ERR  (1 << 22)
 #define MMC_CAP2_NONHOTPLUG	(1 << 25)	/*Don't support hotplug*/
 #define MMC_CAP2_CMD_QUEUE	(1 << 26)	/* support eMMC command queue */
 #define MMC_CAP2_SANITIZE       (1 << 27)               /* Support Sanitize */
 #define MMC_CAP2_SLEEP_AWAKE	(1 << 28)	/* Use Sleep/Awake (CMD5) */
 /* use max discard ignoring max_busy_timeout parameter */
 #define MMC_CAP2_MAX_DISCARD_SIZE	(1 << 29)
+#define MMC_CAP2_BKOPS_EN       (1 << 30)
+#define MMC_CAP2_CACHE_BARRIER		(1 << 31)
 
 	mmc_pm_flag_t		pm_caps;	/* supported pm features */
 
@@ -542,6 +546,8 @@ struct mmc_host {
 	int			claim_cnt;	/* "claim" nesting count */
 
 	struct delayed_work	detect;
+        struct wake_lock        detect_wake_lock;
+        const char              *wlock_name;
 	int			detect_change;	/* card detect flag */
 	struct mmc_slot		slot;
 
@@ -627,6 +633,9 @@ struct mmc_host {
 	void *cmdq_private;
 	struct mmc_request	*err_mrq;
 	bool sdr104_wa;
+        unsigned int            card_detect_cnt;
+        int (*sdcard_uevent)(struct mmc_card *card);
+        int                     pm_progress;    /* pm_notify is in progress */
 	unsigned long		private[0] ____cacheline_aligned;
 };
 
